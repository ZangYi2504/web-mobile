System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./UIMananger.ts"],(function(e){var t,i,n,a,r,o,s,l,c,h,m,u,p,d,g,f,b,v,y,w,I,P,N,x,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Node,h=e.Prefab,m=e.SpriteFrame,u=e.Label,p=e.Sprite,d=e.sys,g=e.view,f=e.UITransform,b=e.Vec3,v=e.tween,y=e.easing,w=e.director,I=e.Component,P=e.instantiate,N=e.find},function(e){x=e.Utils},function(e){L=e.UIMananger}],execute:function(){var S,C,k,z,M,D,O,R,T,U,E,F,A,B,G,H,_,V,W,j,J,K,Z,q,Q,X,Y,$;s._RF.push({},"6aba6VNdCxJ1LtjWHsKkAew","GameManager",void 0);var ee=l.ccclass,te=l.property;e("GameManager",(S=ee("GameManager"),C=te({type:L}),k=te({type:c}),z=te({type:h}),M=te({type:Number}),D=te({type:[m]}),O=te({type:c}),R=te({type:[c]}),T=te({type:u}),U=te({type:u}),E=te({type:u}),F=te({type:u}),A=te({type:p}),S((($=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"uiManager",H,a(t)),n(t,"itemParentNode",_,a(t)),n(t,"itemPrefab",V,a(t)),n(t,"minItem",W,a(t)),n(t,"itemSpriteFrame",j,a(t)),n(t,"matchItemNode",J,a(t)),n(t,"matchItemPositionNode",K,a(t)),n(t,"expLabel",Z,a(t)),n(t,"levelLabel",q,a(t)),n(t,"levelCoinLabel",Q,a(t)),n(t,"coinLabel",X,a(t)),n(t,"levelProgressBar",Y,a(t)),t.screenWidth=void 0,t.screenHight=void 0,t.isClick=!1,t.completeExp=100,t.level=1,t.coin=void 0,t.exp=0,t.userData={level:1,coin:0},t.state=0,t}i(t,e);var s=t.prototype;return s.onLoad=function(){if(null==t.instance?t.instance=this:this.destroy(),d.isBrowser&&void 0!==window.main){window.main.init();window.main.getName("metrey")}},s.getUserData=function(){null==x.getLevelPre()?x.saveUserData(this.userData):this.userData=x.getLevelPre(),console.log(this.userData)},s.start=function(){this.level=this.userData.level,this.coin=this.userData.coin,this.completeExp=100*this.level-50,this.updateTextUI(),this.screenHight=g.getVisibleSize().height,this.screenWidth=g.getVisibleSize().width,this.cloneItem(this.minItem)},s.updateTextUI=function(){this.expLabel.string="exp: "+this.exp.toString(),this.levelLabel.string="level: "+this.level.toString(),this.levelCoinLabel.string="level : "+this.level+" coin: "+this.coin.toString(),this.coinLabel.string=this.coin.toString()},s.cloneItem=function(e){for(var t=this,i=(this.itemParentNode.getComponent(f).width,this.itemParentNode.getComponent(f).height,function(){var e=P(t.itemPrefab);e.setScale(0,0,0),t.itemParentNode.addChild(e);var i=t.itemSpriteFrame[x.randomRange(0,t.itemSpriteFrame.length-1)];e.children[0].getComponent(p).spriteFrame=i,e.name=i.name,v(e).to(.3,{scale:b.ONE,eulerAngles:new b(0,0,360)},{easing:y.sineOut}).start(),e.on(c.EventType.TOUCH_START,(function(){t.addMatchItem(e)}),t)}),n=0;n<e;n++)i()},s.isMatchItem=function(){return this.matchItemNode.length>1&&this.matchItemNode[0].name==this.matchItemNode[1].name},s.randomPos=function(){var e=this.itemParentNode.getComponent(f).width/2,t=this.itemParentNode.getComponent(f).height/2;return new b(x.randomRange(-e,e),x.randomRange(-t,t),0)},s.addMatchItem=function(){var e=r(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClick){e.next=6;break}return this.isClick=!1,t.pauseSystemEvents(!0),this.matchItemNode.push(t),e.next=6,this.checkMatch(t);case 6:this.isClick=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.checkMatch=function(){var e=r(o().mark((function e(t){var i,n,a,r,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setParent(N("Canvas"),!0),t.setPosition(b.ZERO),t.setScale(3,3,3),t.setParent(this.matchItemPositionNode[this.state],!0),i=this.matchItemPositionNode[this.state].getParent().position.y,t.setPosition(new b(0,-i,0)),this.moveAnimation(t,new b(0,0,0)),this.state++,n=!1,e.next=11,new Promise((function(e){return setTimeout(e,400)}));case 11:if(this.cloneItem(1),!(this.state>=3)){e.next=36;break}if(a=this.matchItemNode[this.state-1],r=this.matchItemNode[this.state-2],s=this.matchItemNode[this.state-3],a.name!=r.name||r.name!=s.name){e.next=35;break}return n=!0,this.matchItemNode.splice(this.matchItemNode.indexOf(a),1),this.matchItemNode.splice(this.matchItemNode.indexOf(r),1),this.matchItemNode.splice(this.matchItemNode.indexOf(s),1),v(a).to(.2,{scale:new b(3,3,3)},{easing:y.elasticInOut}).start(),v(r).to(.2,{scale:new b(3,3,3)}).start(),v(s).to(.2,{scale:new b(3,3,3)}).start(),e.next=26,new Promise((function(e){return setTimeout(e,200)}));case 26:a.destroy(),r.destroy(),s.destroy(),console.log("Match"),this.state-=3,this.exp+=x.randomRange(1,30),this.updateProgressBar(),this.checkLevelCompleted(),this.updateTextUI();case 35:console.log(this.state+n.toString());case 36:console.log(this.state+n.toString()),7===this.state&&(console.log("Game Over"),this.uiManager.showLostPanel());case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.updateProgressBar=function(){this.levelProgressBar.fillRange=this.exp/this.completeExp},s.checkLevelCompleted=function(){this.exp>=this.completeExp&&(this.level+=1,this.coin+=x.randomRange(1,3),this.completeExp=100*this.level-50,x.saveUserData({level:this.level,coin:this.coin}))},s.moveAnimation=function(e,t){v(e).to(.3,{scale:new b(3,3,3),position:t,eulerAngles:new b(0,0,x.randomRange(0,0))},{easing:y.sineOut}).then(v(e).to(.3,{scale:b.ONE},{easing:y.sineOut})).start()},s.update=function(e){},s.onDestroy=function(){t.instance==this&&(t.instance=null)},s.back=function(){console.log("back"),w.loadScene("menuScene")},s.replay=function(){console.log("replay"),w.loadScene("scene")},t}(I)).instance=void 0,H=t((G=$).prototype,"uiManager",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(G.prototype,"itemParentNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(G.prototype,"itemPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(G.prototype,"minItem",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(G.prototype,"itemSpriteFrame",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=t(G.prototype,"matchItemNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=t(G.prototype,"matchItemPositionNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=t(G.prototype,"expLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(G.prototype,"levelLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(G.prototype,"levelCoinLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(G.prototype,"coinLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(G.prototype,"levelProgressBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=G))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./main.mjs_cjs=&original=.js","./GameManager.ts","./MenuController.ts","./UIMananger.ts","./Utils.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.js",["./cjs-loader.mjs"],(function(e,n){var t;return{setters:[function(e){t=e.default}],execute:function(){e("default",void 0);var i=e("__cjsMetaURL",n.meta.url);t.define(i,(function(n,t,i,u,o){window.main={init:function(){console.log("main init sdsdd")},getName:function(e){return"hello "+e}},e("default",i.exports)}),{})}}}));

System.register("chunks:///_virtual/main.mjs_cjs=&original=.js",["./main.js","./cjs-loader.mjs"],(function(e,t){var a,r;return{setters:[function(t){a=t.__cjsMetaURL;var r={};r.__cjsMetaURL=t.__cjsMetaURL,r.default=t.default,e(r)},function(e){r=e.default}],execute:function(){a||r.throwInvalidWrapper("./main.js",t.meta.url),r.require(a)}}}));

System.register("chunks:///_virtual/MenuController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,r,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,r=n.director,c=n.Component}],execute:function(){var u;e._RF.push({},"ac9afPfLndIjLs3l0b9yvw6","MenuController",void 0);var l=o.ccclass;o.property,n("MenuController",l("MenuController")(u=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.start=function(){},o.update=function(n){},o.onPlayButtonClick=function(){r.loadScene("scene")},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIMananger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,a,o,i,l,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,l=e.Node,c=e.tween,s=e.Vec3,u=e.Component}],execute:function(){var p,f,h,d,y;o._RF.push({},"d20feSY7xdLVYcSDN7YN6rw","UIMananger",void 0);var g=i.ccclass,v=i.property;e("UIMananger",(p=g("UIMananger"),f=v({type:l}),p((y=t((d=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,r(t,"lostPanel",y,a(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.lostPanel.setScale(1,0,1)},o.showLostPanel=function(){this.lostPanel.active=!0,c(this.lostPanel).to(.5,{scale:new s(1,1,1)}).start()},o.update=function(e){},t}(u)).prototype,"lostPanel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){var s,i;r._RF.push({},"a886cT+wrRLpLJ5n2V0lFIk","Utils",void 0);var a=n.ccclass;n.property,t("Utils",a("Utils")(((i=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.randomRange=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},r.getLevelPre=function(){return JSON.parse(localStorage.getItem(this.key))},r.saveUserData=function(t){localStorage.setItem(this.key,JSON.stringify(t))},r}(o)).key="level",s=i))||s);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});